## Описание проекта

**ShareIt** — это сервис для шеринга вещей между пользователями. Он позволяет:
1. Предоставлять информацию о вещах, которыми пользователь готов поделиться.
2. Находить необходимую вещь и брать её в аренду на определённый период.

Основные возможности сервиса:
- Бронирование вещи на конкретные даты.
- Закрытие доступа к вещи для других пользователей на время бронирования.
- Возможность оставлять запросы на вещи, которых пока нет в сервисе. В ответ на такой запрос другие пользователи могут 
- добавить нужную вещь.

Например, если вам вдруг нужен редкий старинный граммофон для театральной постановки, вы можете оставить запрос, и 
если кто-то имеет такую вещь, он сможет её добавить для аренды.

После возврата вещи арендатор может оставить отзыв. В отзыве можно поблагодарить владельца и подтвердить успешность 
использования вещи.

## Архитектура приложения

В основе приложения будут следующие сущности:
- **Item** (вещь)
- **User** (пользователь)
- **Booking** (бронирование)
- **ItemRequest** (запрос на добавление вещи)

Структура приложения организована по принципу **feature layout**. В корневом пакете будут созданы четыре подпакета:
- `item`
- `booking`
- `request`
- `user`

В каждом пакете будут располагаться контроллеры, сервисы, репозитории и прочие необходимые классы, относящиеся к 
соответствующей сущности.

## Модель данных

Основная сущность — **Item** (вещь), которая имеет следующие характеристики:
- Короткое название.
- Описание.
- Статус доступности для аренды (устанавливается владельцем).

Пользователь, добавляющий вещь, считается её владельцем.

Для поиска вещей будет реализован функционал полнотекстового поиска по названию и описанию.

### Booking (бронирование)

Бронирование вещи происходит на определённые даты. Владелец должен подтвердить бронирование. На период бронирования 
вещь недоступна для других пользователей.

### Отзыв (комментарий)

После использования вещи арендатор может оставить отзыв о вещи, подтверждая, что она справилась со своей задачей.

### ItemRequest (запрос на вещь)

Если нужная вещь не найдена, пользователь может создать запрос с указанием того, что именно ему требуется. Другие 
пользователи смогут добавить такую вещь для аренды.

## DTO и мапперы

Для разделения слоёв приложения будут использоваться **DTO-объекты**.  
DTO нужны для передачи данных через REST-интерфейс без раскрытия внутренней структуры базы данных.

Также будут созданы **Mapper-классы**, которые обеспечат преобразование сущностей модели в DTO и обратно.

## Разработка контроллеров

Приложение будет состоять из трёх слоёв:
- Контроллеры
- Сервисы
- Репозитории

На первом спринте основной фокус будет на контроллерах и их взаимодействии с сервисами (данные пока хранятся в памяти).

### UserController

Необходимо реализовать CRUD-операции для пользователей:
- Создание пользователя
- Редактирование пользователя
- Просмотр информации о пользователе
- Удаление пользователя (опционально)

Данные о пользователях временно будут храниться в памяти.

### ItemController

Контроллер для работы с вещами. Он должен поддерживать следующие сценарии:

1. **Добавление новой вещи**  
   `POST /items`  
   В заголовке запроса **X-Sharer-User-Id** передаётся идентификатор владельца.

2. **Редактирование вещи**  
   `PATCH /items/{itemId}`  
   Изменять можно название, описание и статус доступности. Редактировать вещь может только её владелец.

3. **Просмотр вещи по идентификатору**  
   `GET /items/{itemId}`  
   Любой пользователь может просматривать информацию о вещи.

4. **Просмотр списка всех вещей владельца**  
   `GET /items`  
   Отображение всех вещей владельца с их названиями и описаниями.

5. **Поиск вещи**  
   `GET /items/search?text={text}`  
   В результате поиска возвращаются только доступные для аренды вещи, содержащие указанный текст в названии или описании.

### ItemService

Создайте интерфейс `ItemService` и класс `ItemServiceImpl`, реализующий этот интерфейс. Контроллер будет 
взаимодействовать с сервисом для выполнения описанных выше операций.

## Инструкция по началу работы

1. Переключитесь на ветку `add-controllers`.
2. Запустите приложение с помощью Spring Boot.
3. Используйте описанные эндпоинты для взаимодействия с сервисом.


Советы по проекту:
# Реализация модели данных

## Класс Item

В пакете `item` создайте класс `Item` и добавьте в него следующие поля:

- **id** — уникальный идентификатор вещи;
- **name** — краткое название;
- **description** — развёрнутое описание;
- **available** — статус о том, доступна или нет вещь для аренды;
- **owner** — владелец вещи;
- **request** — если вещь была создана по запросу другого пользователя, то в этом поле будет храниться ссылка на соответствующий запрос.

## Класс User

В пакете `user` создайте класс `User`, который будет содержать три поля:

- **id** — уникальный идентификатор пользователя;
- **name** — имя или логин пользователя;
- **email** — адрес электронной почты (учтите, что два пользователя не могут иметь одинаковый адрес электронной почты).

## Класс Booking

В пакете `booking` создайте класс `Booking`. Он будет содержать следующие поля:

- **id** — уникальный идентификатор бронирования;
- **start** — дата и время начала бронирования;
- **end** — дата и время конца бронирования;
- **item** — вещь, которую пользователь бронирует;
- **booker** — пользователь, осуществляющий бронирование;
- **status** — статус бронирования. Может принимать одно из следующих значений:
   - **WAITING** — новое бронирование, ожидает одобрения.
   - **APPROVED** — бронирование подтверждено владельцем.
   - **REJECTED** — бронирование отклонено владельцем.
   - **CANCELED** — бронирование отменено создателем.

## Класс ItemRequest

В пакете `request` создайте класс `ItemRequest`, отвечающий за запрос вещи. Его атрибуты:

- **id** — уникальный идентификатор запроса;
- **description** — текст запроса, содержащий описание требуемой вещи;
- **requestor** — пользователь, создавший запрос;
- **created** — дата и время создания запроса.

Добавьте необходимые аннотации Lombok, чтобы сгенерировать геттеры и сеттеры для полей.

---

# Создание DTO-объектов и мапперов

В пакетах `item` и `user` создайте дополнительные DTO-классы (например, `ItemDto`).  
Для начала можно оставить в DTO те же поля, что и в изначальной модели. Когда вы поймёте, какую именно структуру данных контроллеры должны возвращать пользователю или получать от него, можно будет добавлять новые атрибуты.

Для сущностей `Item` и `User` создайте маппер-классы, которые преобразуют объекты модели в DTO-объекты. Например, для сущности `Item` вам нужно создать класс `ItemMapper` и добавить в него метод `toItemDto()`, который может выглядеть примерно так:

```java
public static ItemDto toItemDto(Item item) {
    return new ItemDto(
        item.getId(),
        item.getName(),
        item.getDescription(),
        item.isAvailable(),
        item.getRequest() == null ? null : item.getRequest().getId()
    );
}
